<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h2>수정</h2>


  <form action="/board/modify" method="post">
  bno :  <input type="text" th:value="${dto.bno}" name="bno" readonly> <br>

  title : <input type="text" th:value="${dto.title}" name="title"> <br>
  content : <input type="text" th:value="${dto.content}" name="content"> <br>
  writer : <input type="text" th:value="${dto.writer}" readonly name="writer"> <br>

  등록일: <input type="text" th:value="${#temporals.format(dto.regDate, 'yyyy-MM-dd')}" readonly>

  수정일: <input type="text" th:value="${#temporals.format(dto.modDate, 'yyyy-MM-dd HH:mm:ss')}" readonly>


      <button type="button" class="listBtn">목록</button>
      <button type="button" class="modBtn">저장</button>
      <button type="button" class="rBtn">삭제</button>


  </form>
    <script th:inline="javascript">
            const link = [[${pageRequestDTO.getLink()}]];
            const formObj = document.querySelector("form");

            document.querySelector(".modBtn").addEventListener("click", function (e) {
                e.preventDefault();
                e.stopPropagation();

                formObj.action = `/board/modify?${link}`;

                formObj.submit();

            });

            document.querySelector(".rBtn").addEventListener("click", function (e) {
                e.preventDefault();
                e.stopPropagation();

                formObj.action = '/board/remove';
                formObj.method = 'post';
                formObj.submit();
            });

            document.querySelector(".listBtn").addEventListener("click", function (e){
                e.preventDefault();
                e.stopPropagation();

                formObj.reset();
                self.location ='/board/list?'+link;

            });
    </script>


<script th:inline="javascript">
    const errors = [[${errors}]];
    console.log(errors);

    let errorMsg = '';

    if(errors){
        for(let i = 0 ; i<errors.length; i++){
            errorMsg += `${errors[i].field}은 ${errors[i].defaultMessage} \n`
        }

        alert(errorMsg);
    }

</script>


</body>
</html>